# 单例模式

## 编写原则
1. 单例私有
2. 单例内成员私有
3. 开放访问方法
4. 初始化过程中建立共有临时变量用来加载，单例内成员逐个初始化
5. 使用sync.once控制初始化次数
6. 单例内成员使用结构体，不使用指针
7. 有操作、重连操作的，临界区使用RWLock。

## 注意点
1. 初始化方法中，单例定义无关操作成员直接初始化，避免panic
2. 初始化超时处理
3. 初始化私有变量，如果无法在定义的时候装载，可写一个公有方法（但是有风险，尽量还是一开始初始化好）
4. 初始化函数要对单例进行检测，再进行赋值
5. 有状态检测的（Run方法），defer要放在go func内部
6. 访问时要注意检查对象是否为空

